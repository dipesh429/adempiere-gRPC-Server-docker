(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cbdb7b16"],{1421:function(t,e,s){"use strict";var r=s("5013"),o=s.n(r);o.a},"33f0":function(t,e,s){},5013:function(t,e,s){},"964c":function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.isEmptyValue(t.getProcessLog)?s("div",{key:"without-process"},[s("h1",{staticClass:"text-center"},[t._v(t._s(t.$t("views.noProcess")))])]):s("div",{key:"with-process",staticClass:"app-container"},[s("el-timeline",t._l(t.getProcessLog,(function(e,r){return s("el-timeline-item",{key:r,attrs:{timestamp:t.translateDate(e.lastRun),placement:"top",type:"primary",size:"large",color:t.checkStatus(e).color}},[s("el-card",[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",[s("b",[t._v(t._s(e.name))])]),s("div",{staticClass:"actions"},[s("el-dropdown",{on:{command:t.handleCommand}},[s("span",{staticClass:"el-dropdown-link"},[t._v(" "+t._s(t.$t("components.contextMenuActions"))),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e.isReport?s("el-dropdown-item",{attrs:{command:Object.assign({},e,{command:"seeReport"})}},[t._v(" "+t._s(t.$t("views.seeReport"))+" ")]):t._e(),s("el-dropdown-item",{attrs:{command:Object.assign({},e,{command:"zoomIn"})}},[t._v(" "+t._s(t.$t("table.ProcessActivity.zoomIn"))+" ")])],1)],1)],1)]),s("el-form",{attrs:{"label-position":"top"}},[e.description?s("el-form-item",{attrs:{label:t.generateTitle("Description")}},[s("span",[s("b",[t._v(t._s(e.description))])]),e.isReport?s("span",[t._v(t._s(e.output.description))]):t._e()]):t._e(),s("el-form-item",{attrs:{label:t.generateTitle("Status")}},[!e.isError||e.summary||e.isReport?t.isEmptyValue(e.logsList)&&t.isEmptyValue(e.summary)?e.isReport?s("el-popover",{key:r+"is-output",attrs:{placement:"right",width:"700",trigger:"hover"}},[s("div",[s("span",[t._v(" "+t._s(t.$t("table.ProcessActivity.Output"))+" ")]),s("br"),s("span",[t._v(t._s(t.$t("table.ProcessActivity.Name"))+": "+t._s(e.output.name))]),s("br"),s("span",[t._v(t._s(t.$t("table.ProcessActivity.Description"))+": "+t._s(e.output.description))]),s("br"),s("span",[t._v(t._s(t.$t("table.ProcessActivity.FileName"))+": "+t._s(e.output.fileName))]),s("br"),s("a",{attrs:{type:"text",href:e.url,download:e.download}},[t._v(" "+t._s(t.$t("components.contextMenuDownload"))+" "),s("i",{staticClass:"el-icon-download"})])]),s("el-tag",{attrs:{slot:"reference",type:t.checkStatus(e).type},slot:"reference"},[t._v(" "+t._s(t.checkStatus(e).text)+" ")])],1):s("el-popover",{key:r+"is-other",attrs:{placement:"top-start",title:t.$t("table.ProcessActivity.Logs"),width:"200",trigger:"hover",content:e.summary}},[s("el-tag",{attrs:{slot:"reference",type:t.checkStatus(e).type},slot:"reference"},[t._v(" "+t._s(t.checkStatus(e).text)+" ")])],1):s("el-popover",{key:r+"is-summary",attrs:{placement:"right",width:"500",trigger:"hover"}},[s("b",[t._v(t._s(t.$t("table.ProcessActivity.Logs")))]),s("br"),s("ul",[s("li",{on:{click:function(s){return t.handleCommand(Object.assign({},e,{command:"zoomIn"}))}}},[t._v(" "+t._s(e.summary)+" ")]),s("el-scrollbar",{attrs:{"wrap-class":"popover-scroll"}},t._l(e.logsList,(function(r,o){return s("li",{key:o,on:{click:function(s){return t.zoomIn(e)}}},[t._v(" "+t._s(r.log)+" ")])})),0)],1),s("el-tag",{attrs:{slot:"reference",type:t.checkStatus(e).type},slot:"reference"},[t._v(" "+t._s(t.checkStatus(e).text)+" ")])],1):s("el-popover",{key:r+"is-error",attrs:{placement:"right",width:"700",trigger:"hover"}},[s("div",[t._v(" "+t._s(e.message)+" ")]),s("el-tag",{attrs:{slot:"reference",type:t.checkStatus(e).type},slot:"reference"},[t._v(" "+t._s(t.checkStatus(e).text)+" ")])],1)],1)],1)],1)],1)})),1)],1)},o=[],n=(s("99af"),s("4de4"),s("c740"),s("4160"),s("b0c0"),s("159b"),s("5530")),i=s("3fbe"),a={name:"ProcessActivity",data:function(){return{processActivity:[],recordCount:0,pageToken:"",pageSize:50}},computed:{getterAllInExecution:function(){return this.$store.getters.getAllInExecution},getterAllFinishProcess:function(){return this.$store.getters.getAllFinishProcess},getterAllSessionProcess:function(){return this.$store.getters.getAllSessionProcess},getRunProcessAll:function(){var t=this,e=this.getterAllInExecution.concat(this.getterAllFinishProcess,this.getterAllSessionProcess),s=[];return e.forEach((function(e){var r={},o=t.getProcessMetadata(e.processUuid);o||(o={}),Object.assign(r,e,o),r.parametersList=e.parametersList;var n=s.findIndex((function(s){return s.instanceUuid===e.instanceUuid&&!t.isEmptyValue(e.instanceUuid)}));if(n>-1){var i=Object.assign(r,s[n]);s[n]=i}else s.push(r)})),s.sort((function(t,e){return new Date(t.lastRun)-new Date(e.lastRun)})).reverse()},getProcessLog:function(){var t=this.getRunProcessAll.filter((function(t){if(void 0!==t.isError&&void 0!==t.isProcessing)return t}));return t},language:function(){return this.$store.getters.language},permissionRoutes:function(){return this.$store.getters.permission_routes}},beforeMount:function(){var t=this;this.$store.dispatch("getSessionProcessFromServer",{pageToken:this.pageToken,pageSize:this.pageSize}).then((function(e){e.nextPageToken!==t.pageToken&&(t.pageToken=e.nextPageToken)}))},methods:{getProcessMetadata:function(t){return this.$store.getters.getProcess(t)},handleCommand:function(t){if("seeReport"===t.command)this.$router.push({name:"Report Viewer",params:{processId:t.processId,instanceUuid:t.instanceUuid,fileName:t.output.fileName}});else if("zoomIn"===t.command){var e=Object(i["g"])({treeData:this.permissionRoutes,attributeValue:t.uuid,attributeName:"meta",secondAttribute:"uuid",attributeChilds:"children"});e&&this.$router.push({name:e.name,query:Object(n["a"])(Object(n["a"])({},this.$route.query),t.parametersList)})}},checkStatus:function(t){var e=t.isError,s=t.isProcessing,r=t.isReport,o={text:this.$t("notifications.completed"),type:"success",color:"#67C23A"};return r?o:s?(o.text=this.$t("notifications.processing"),o.type="info",o.color="#909399",o):e?(o.text=this.$t("notifications.error"),o.type="danger",o.color="#F56C6C",o):o},generateTitle:function(t){var e=this.$te("table.ProcessActivity."+t);if(e){var s=this.$t("table.ProcessActivity."+t);return s}return t},translateDate:function(t){return this.$d(new Date(t),"long",this.language)}}},c=a,l=(s("fc38"),s("1421"),s("2877")),u=Object(l["a"])(c,r,o,!1,null,"037c9ba7",null);e["default"]=u.exports},fc38:function(t,e,s){"use strict";var r=s("33f0"),o=s.n(r);o.a}}]);