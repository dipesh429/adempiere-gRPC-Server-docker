(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9f068abc","chunk-2d222597"],{1:function(e,t){},2:function(e,t){},3:function(e,t){},"4bf8":function(e,t,i){"use strict";i.r(t),i.d(t,"export_table_to_excel",(function(){return h})),i.d(t,"export_json_to_excel",(function(){return l}));i("99af"),i("4160"),i("d81d"),i("c19f"),i("ace4"),i("d3b7"),i("25f0"),i("5cc6"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7"),i("159b");var r=i("2909"),n=i("1146"),o=i.n(n);function a(e){for(var t=[],i=e.querySelectorAll("tr"),r=[],n=0;n<i.length;++n){for(var o=[],a=i[n],s=a.querySelectorAll("td"),c=0;c<s.length;++c){var u=s[c],d=u.getAttribute("colspan"),h=u.getAttribute("rowspan"),l=u.innerText;if(""!==l&&l==+l&&(l=+l),r.forEach((function(e){if(n>=e.s.r&&n<=e.e.r&&o.length>=e.s.c&&o.length<=e.e.c)for(var t=0;t<=e.e.c-e.s.c;++t)o.push(null)})),(h||d)&&(h=h||1,d=d||1,r.push({s:{r:n,c:o.length},e:{r:n+h-1,c:o.length+d-1}})),o.push(""!==l?l:null),d)for(var p=0;p<d-1;++p)o.push(null)}t.push(o)}return[t,r]}function s(e,t){t&&(e+=1462);var i=Date.parse(e);return(i-new Date(Date.UTC(1899,11,30)))/864e5}function c(e,t){for(var i={},r={s:{c:1e7,r:1e7},e:{c:0,r:0}},n=0;n!=e.length;++n)for(var a=0;a!=e[n].length;++a){r.s.r>n&&(r.s.r=n),r.s.c>a&&(r.s.c=a),r.e.r<n&&(r.e.r=n),r.e.c<a&&(r.e.c=a);var c={v:e[n][a]};if(null!=c.v){var u=o.a.utils.encode_cell({c:a,r:n});"number"===typeof c.v?c.t="n":"boolean"===typeof c.v?c.t="b":c.v instanceof Date?(c.t="n",c.z=o.a.SSF._table[14],c.v=s(c.v)):c.t="s",i[u]=c}}return r.s.c<1e7&&(i["!ref"]=o.a.utils.encode_range(r)),i}function u(){if(!(this instanceof u))return new u;this.SheetNames=[],this.Sheets={}}function d(e){for(var t=new ArrayBuffer(e.length),i=new Uint8Array(t),r=0;r!=e.length;++r)i[r]=255&e.charCodeAt(r);return t}function h(e){var t=document.getElementById(e),i=a(t),r=i[1],n=i[0],s="SheetJS",h=new u,l=c(n);l["!merges"]=r,h.SheetNames.push(s),h.Sheets[s]=l;var p=o.a.write(h,{bookType:"xlsx",bookSST:!1,type:"binary"});saveAs(new Blob([d(p)],{type:"application/octet-stream"}),"test.xlsx")}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.multiHeader,i=void 0===t?[]:t,n=e.header,a=e.data,s=e.filename,h=e.merges,l=void 0===h?[]:h,p=e.autoWidth,f=void 0===p||p,m=e.bookType,y=void 0===m?"xlsx":m;s=s||"excel-list",a=Object(r["a"])(a),a.unshift(n);for(var g=i.length-1;g>-1;g--)a.unshift(i[g]);var b="SheetJS",v=new u,w=c(a);if(l.length>0&&(w["!merges"]||(w["!merges"]=[]),l.forEach((function(e){w["!merges"].push(o.a.utils.decode_range(e))}))),f){for(var U=a.map((function(e){return e.map((function(e){return null==e?{wch:10}:e.toString().charCodeAt(0)>255?{wch:2*e.toString().length}:{wch:e.toString().length}}))})),$=U[0],x=1;x<U.length;x++)for(var R=0;R<U[x].length;R++)$[R]["wch"]<U[x][R]["wch"]&&($[R]["wch"]=U[x][R]["wch"]);w["!cols"]=$}v.SheetNames.push(b),v.Sheets[b]=w;var T=o.a.write(v,{bookType:y,bookSST:!1,type:"binary"});saveAs(new Blob([d(T)],{type:"application/octet-stream"}),"".concat(s,".").concat(y))}i("0fd4")},"63b6":function(e,t,i){"use strict";var r=i("6ab2"),n=i.n(r);n.a},"6ab2":function(e,t,i){},c19f:function(e,t,i){"use strict";var r=i("23e7"),n=i("da84"),o=i("621a"),a=i("2626"),s="ArrayBuffer",c=o[s],u=n[s];r({global:!0,forced:u!==c},{ArrayBuffer:c}),a(s)},cddd:function(e,t,i){"use strict";i.r(t),i.d(t,"export_txt_to_zip",(function(){return o}));i("4160"),i("d3b7"),i("25f0"),i("159b");var r=i("c4e3"),n=i.n(r);function o(e,t,i,r){var o=new n.a,a=i||"file",s=r||"file",c=t,u="".concat(e,"\r\n");c.forEach((function(e){var t="";t=e.toString(),u+="".concat(t,"\r\n")})),o.file("".concat(a,".txt"),u),o.generateAsync({type:"blob"}).then((function(e){saveAs(e,"".concat(s,".zip"))}),(function(e){alert("导出失败")}))}i("0fd4")},cff1:function(e,t,i){"use strict";i.d(t,"c",(function(){return a})),i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return c}));i("4160"),i("d81d"),i("b64b"),i("159b");var r=i("4bf8"),n=i("cddd"),o=i("9923"),a={xlsx:o["default"].t("report.ExportXlsx"),xls:o["default"].t("report.ExportXls"),xml:o["default"].t("report.ExporXml"),csv:o["default"].t("report.ExporCsv"),txt:o["default"].t("report.ExportTxt"),html:o["default"].t("report.ExportHtml")};function s(e){var t=e.header,i=e.data,n=e.exportType,a=i.map((function(e){return Object.keys(e).forEach((function(t){"boolean"===typeof e[t]&&(e[t]=e[t]?o["default"].t("components.switchActiveText"):o["default"].t("components.switchInactiveText"))})),e}));Object(r["export_json_to_excel"])({header:t,data:a,filename:"",bookType:n})}function c(e){var t=e.header,i=e.data,r=e.title,a=i.map((function(e){return Object.keys(e).forEach((function(t){"boolean"===typeof e[t]&&(e[t]=e[t]?o["default"].t("components.switchActiveText"):o["default"].t("components.switchInactiveText"))})),e}));Object(n["export_txt_to_zip"])(t,a,r)}},da45:function(e,t,i){"use strict";i.d(t,"a",(function(){return g}));i("99af"),i("4de4"),i("7db0"),i("4160"),i("caad"),i("d81d"),i("b0c0"),i("d3b7"),i("2532"),i("3ca3"),i("159b"),i("ddb0"),i("2b3d");var r=i("5530"),n=i("8839"),o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return"summary"===e.item.meta.type?i("el-submenu",{key:"is-summary",attrs:{index:e.item.meta.title,"popper-append-to-body":""}},[i("template",{slot:"title"},[e.isMobile?i("svg-icon",{attrs:{"icon-class":"nested"}}):e._e(),e._v(" "+e._s(e.item.meta.title)+" ")],1),e._l(e.item.children,(function(t,r){return i("item",{key:r,attrs:{item:t}},[e._v(" "+e._s(t.meta.title)+" ")])}))],2):i("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:e.item.meta.uuid!==e.$route.meta.uuid,expression:"item.meta.uuid !== $route.meta.uuid"}],key:"not-summary",attrs:{index:e.item.meta.uuid},on:{click:function(t){return e.handleClick(e.item)}}},[e.isMobile?i("svg-icon",{attrs:{"icon-class":e.classIconMenuRight}}):e._e(),e._v(" "+e._s(e.item.meta.title)+" ")],1)},a=[],s=[{type:"window",icon:"tab"},{type:"report",icon:"skill"},{type:"task",icon:"size"},{type:"process",icon:"component"},{type:"browser",icon:"search"},{type:"workflow",icon:"example"},{type:"form",icon:"form"}],c={name:"Item",props:{item:{type:Object,required:!0}},computed:{isMobile:function(){return"mobile"===this.$store.state.app.device},classIconMenuRight:function(e){var t=this;return e=s.find((function(e){return e.type===t.item.meta.type})),e.icon}},methods:{handleClick:function(e){this.$router.push({name:e.name,query:{tabParent:0}})}}},u=c,d=(i("63b6"),i("2877")),h=Object(d["a"])(u,o,a,!1,null,null,null),l=h.exports,p=i("3fbe"),f=i("cff1"),m={PRINT_FORMAT_SETUP_WINDOW:{uuid:"8e5131dc-fb40-11e8-a479-7a0060f0aa01",action:void 0,tabParent:"0",tabChild:void 0},REQUEST_WINDOW:{uuid:"8e510176-fb40-11e8-a479-7a0060f0aa01",action:void 0,tabParent:"0",tabChild:void 0},WORKFLOW_WINDOW:{uuid:"8e5168e6-fb40-11e8-a479-7a0060f0aa01",action:void 0,tabParent:"0",tabChild:void 0},DOCUMENTS_WINDOW:{uuid:"8e50d7c8-fb40-11e8-a479-7a0060f0aa01",action:void 0,tabParent:"0",tabChild:void 0}},y=m,g={components:{Item:l},props:{menuParentUuid:{type:String,default:void 0},parentUuid:{type:String,default:void 0},containerUuid:{type:String,required:!0},panelType:{type:String,default:void 0},tableName:{type:String,default:void 0},isReport:{type:Boolean,default:!1},lastParameter:{type:String,default:void 0},reportFormat:{type:String,default:void 0},isInsertRecord:{type:Boolean,default:void 0},defaultFromatExport:{type:String,default:"xlsx"},isDisplayed:{type:Boolean,default:!1}},data:function(){return{actions:[],supportedTypes:f["c"],references:[],file:this.$store.getters.getProcessResult.download,downloads:this.$store.getters.getProcessResult.url,metadataMenu:{},recordUuid:this.$route.query.action,isLoadedReferences:!1,exportDefault:"xls",ROUTES:y}},computed:{activeMenu:function(){var e=this.$route,t=e.meta,i=e.path;return t.activeMenu?t.activeMenu:i},getterContextMenu:function(){return this.$store.getters.getContextMenu(this.containerUuid)},isReferecesContent:function(){return"window"===this.panelType&&!this.isEmptyValue(this.recordUuid)&&"create-new"!==this.recordUuid},getterReferences:function(){return this.isReferecesContent?this.$store.getters.getReferencesList(this.parentUuid,this.recordUuid):[]},relationsList:function(){var e=this.$route.params.menuParentUuid;this.isEmptyValue(e)&&(e=this.menuParentUuid);var t=this.$store.getters.getRelations(e);return t?t.children:[]},permissionRoutes:function(){return this.$store.getters.permission_routes},valuesPanelToShare:function(){return this.$store.getters.getParametersToShare({containerUuid:this.containerUuid,isOnlyDisplayed:!0,isAdvancedQuery:"advancedQuery"===this.$route.query.action})},getterFieldList:function(){return this.$store.getters.getFieldsListFromPanel(this.containerUuid)},getterFieldListHeader:function(){var e=this.getterFieldList.filter((function(e){var t=e.isDisplayed||e.isDisplayedFromLogic;if(e.isActive&&t&&!e.isKey)return e.name}));return e.map((function(e){return e.name}))},getterFieldListValue:function(){var e=this.getterFieldList.filter((function(e){var t=e.isDisplayed||e.isDisplayedFromLogic;if(e.isActive&&t&&!e.isKey)return e}));return e.map((function(e){return"FieldSelect"===e.componentPath?"DisplayColumn_"+e.columnName:e.columnName}))},isDisabledExportRecord:function(){return"browser"===this.panelType&&this.getDataSelection.length<1},getAllDataRecords:function(){return this.$store.getters.getDataRecordAndSelection(this.containerUuid)},getDataSelection:function(){return this.getAllDataRecords.selection},getDataRecord:function(){var e=this;return this.getAllDataRecords.record.filter((function(t){if(e.recordUuid===t.UUID)return t}))},getDataLog:function(){if("window"===this.panelType)return this.$store.getters.getDataLog(this.containerUuid,this.recordUuid)},processParametersExecuted:function(){return this.$store.getters.getCachedReport(this.$route.params.instanceUuid).parameters},getOldRouteOfWindow:function(){if("window"===this.panelType){var e=this.$store.state.windowControl.windowOldRoute;if(!this.isEmptyValue(e.query.action)&&"create-new"!==e.query.action&&"create-new"===this.$route.query.action)return e}return!1},getReportDefinition:function(){return this.$store.getters.getCachedReport(this.$route.params.instanceUuid)},isPersonalLock:function(){return this.$store.getters["user/getIsPersonalLock"]},listDocumentActions:function(){return this.$store.getters.getListDocumentActions.documentActionsList},isManageDataRecords:function(){return["browser","window"].includes(this.panelType)}},watch:{"$route.query.action":function(e){this.recordUuid=e,"window"===this.panelType&&(this.generateContextMenu(),this.getReferences())},isInsertRecord:function(e,t){"window"===this.panelType&&e!==t&&this.generateContextMenu()},getDataLog:function(e,t){"window"===this.panelType&&e!==t&&this.generateContextMenu()},isDisabledExportRecord:function(e){var t=this;e&&this.$nextTick((function(){t.$refs.contextMenu.close("exportRecord")}))}},created:function(){this.generateContextMenu()},mounted:function(){this.getReferences()},methods:{showMessage:n["a"],showNotification:n["b"],actionContextMenu:function(e){switch(e.srcKey){case"f2":this.$store.dispatch("resetPanelToNew",{parentUuid:this.parentUuid,containerUuid:this.containerUuid,recordUuid:this.recordUuid,panelType:"window",isNewRecord:!0});break;case"f3":this.$store.dispatch("deleteEntity",{parentUuid:this.parentUuid,containerUuid:this.containerUuid,recordUuid:this.recordUuid});break;case"f5":this.refreshData();break}},refreshData:function(){if("window"===this.panelType)this.$store.dispatch("getDataListTab",{parentUuid:this.parentUuid,containerUuid:this.containerUuid,isRefreshPanel:!0,recordUuid:this.recordUuid}).catch((function(e){console.warn("Error getting data list tab. Message: ".concat(e.message,", code ").concat(e.code,"."))}));else if("browser"===this.panelType){var e=this.$store.getters.getFieldListEmptyMandatory({containerUuid:this.containerUuid,fieldsList:this.getterFieldList});e.length?this.showMessage({message:this.$t("notifications.mandatoryFieldMissing")+e,type:"info"}):this.$store.dispatch("getBrowserSearch",{containerUuid:this.containerUuid,isClearSelection:!0})}},getReferences:function(){var e=this;if(this.isReferecesContent){var t=this.getterReferences;t&&t.length?(this.references=t,this.isLoadedReferences=!0):(this.isLoadedReferences=!1,this.$store.dispatch("getReferencesListFromServer",{parentUuid:this.parentUuid,containerUuid:this.containerUuid,tableName:this.tableName,recordUuid:this.recordUuid}).then((function(){e.references=e.getterReferences})).finally((function(){e.isLoadedReferences=!0})))}else this.references=[],this.isLoadedReferences=!1},exportRecord:function(e){var t=this.getterFieldListHeader,i=this.getterFieldListValue,r=[];"window"===this.panelType?r=this.getDataRecord:"browser"===this.panelType&&(r=this.getDataSelection);var n=this.formatJson(i,r);Object(f["a"])({header:t,data:n,filename:"",exportType:e})},formatJson:function(e,t){return t.map((function(t){return e.map((function(e){return t[e]}))}))},generateContextMenu:function(){var e=this;if(this.metadataMenu=this.getterContextMenu,!this.isEmptyValue(this.metadataMenu)){if(this.actions=this.metadataMenu.actions,"window"===this.panelType){this.isEmptyValue(this.$route.params.tableName)||this.$store.dispatch("getPrivateAccessFromServer",{tableName:this.$route.params.tableName,recordId:this.$route.params.recordId}).then((function(t){e.isEmptyValue(t)||e.$nextTick((function(){e.validatePrivateAccess(t)}))}));var t=this.actions.find((function(e){if("Procesar Orden"===e.name||"Process Order"===e.name)return e}));this.$store.dispatch("setOrder",t)}this.actions&&this.actions.length&&this.actions.forEach((function(t){"report"===e.$route.meta.type&&"startProcess"===t.action&&(t.reportExportType="html"),t.disabled=!1,("Report Viewer"!==e.$route.name&&"changeParameters"===t.action||"process"===e.$route.meta.type&&"summary"===t.type)&&(t.disabled=!0),"window"===e.$route.meta.type&&("create-new"!==e.recordUuid&&e.isInsertRecord||(t.disabled=!0),"undoModifyData"===t.action&&(t.disabled=Boolean(!e.getDataLog&&!e.getOldRouteOfWindow)))}))}},showModal:function(e){if("process"===e.type){if(e.parentUuidAssociated||e.containerUuidAssociated){var t=this.$store.getters.getContextView({parentUuid:e.parentUuidAssociated,containerUuid:e.containerUuidAssociated});this.isEmptyValue(t)||this.$store.dispatch("setMultipleContextView",{containerUuid:e.uuid,values:t})}this.$store.dispatch("setShowDialog",{type:e.type,action:Object(r["a"])(Object(r["a"])({},e),{},{containerUuid:e.uuid})})}},runAction:function(e){var t=this;"action"===e.type?this.executeAction(e):"process"===e.type?this.showModal(e):"dataAction"===e.type?"undoModifyData"===e.action&&Boolean(!this.getDataLog)&&this.getOldRouteOfWindow?this.$router.push({path:this.getOldRouteOfWindow.path,query:Object(r["a"])({},this.getOldRouteOfWindow.query)}):this.$store.dispatch(e.action,{parentUuid:this.parentUuid,containerUuid:this.containerUuid,recordUuid:this.recordUuid,panelType:this.panelType,isNewRecord:"resetPanelToNew"===e.action,tableName:e.tableName,recordId:e.recordId}).then((function(e){e&&e.isPrivateAccess&&t.validatePrivateAccess(e)})):"updateReport"===e.type&&this.updateReport(e)},executeAction:function(e){var t=this.$route.meta.uuid;void 0!==this.lastParameter&&(t=this.lastParameter);var i=this.$store.getters.getFieldListEmptyMandatory({containerUuid:t});if(this.isEmptyValue(i)){var r=this.menuParentUuid;this.isEmptyValue(r)&&this.$route.params&&(this.isEmptyValue(this.$route.params.menuParentUuid)||(r=this.$route.params.menuParentUuid)),"process"===this.panelType&&this.$store.dispatch("setTempShareLink",{processId:this.$route.params.processId,href:window.location.href});var n=e.reportExportType;this.isEmptyValue(n)&&(n=this.$route.query.reportType,this.isEmptyValue(n)&&(n=this.$route.meta.reportFormat,this.isEmptyValue(n)&&(n="html"))),this.$store.dispatch(e.action,{action:e,parentUuid:this.containerUuid,containerUuid:t,panelType:this.panelType,reportFormat:n,menuParentUuid:r,routeToDelete:this.$route}).catch((function(e){console.warn(e)}))}else this.showNotification({type:"warning",title:this.$t("notifications.emptyValues"),name:"<b>"+i+".</b> ",message:this.$t("notifications.fieldMandatory"),isRedirect:!1})},updateReport:function(e){var t=this,i=e.instanceUuid;this.isEmptyValue(i)&&(i=this.$route.params.instanceUuid);var r=e.processId;this.isEmptyValue(r)&&(r=this.$route.params.processId),this.$store.dispatch("getReportOutputFromServer",{instanceUuid:i,processUuid:e.processUuid,tableName:e.tableName,processId:r,printFormatUuid:e.printFormatUuid,reportViewUuid:e.reportViewUuid,isSummary:!1,reportName:this.$store.getters.getProcessResult.name,reportType:this.$store.getters.getReportType,option:e.option}).then((function(e){if(!e.isError){var i={href:void 0,download:void 0},r=new Blob([e.outputStream],{type:e.mimeType});i=document.createElement("a"),i.href=window.URL.createObjectURL(r),i.download=e.fileName,"pdf"!==e.reportType&&"html"!==e.reportType&&i.click(),e.url=i.href}t.$store.dispatch("finishProcess",{processOutput:e,routeToDelete:t.$route})}))},openReference:function(e){if(e.windowUuid&&e.recordUuid){var t=Object(p["g"])({treeData:this.permissionRoutes,attributeValue:e.windowUuid,attributeName:"meta",secondAttribute:"uuid",attributeChilds:"children"});t?this.$router.push({name:t.name,query:{action:e.type,referenceUuid:e.uuid,recordUuid:e.recordUuid,tabParent:0}}):this.showMessage({type:"error",message:this.$t("notifications.noRoleAccess")})}},setShareLink:function(){var e="window"===this.panelType||window.location.href.includes("?")?"".concat(window.location.href,"&"):"".concat(window.location.href,"?");if("Report Viewer"===this.$route.name){var t=Object(p["c"])(this.processParametersExecuted),i=this.$store.getters.getReportType;e=this.$store.getters.getTempShareLink,String(t).length&&(e+="?"+t,e+="&reportType=".concat(i))}else String(this.valuesPanelToShare).length&&(e+=this.valuesPanelToShare),this.$route.query.action&&"create-new"!==this.$route.query.action&&"reference"!==this.$route.query.action&&"advancedQuery"!==this.$route.query.action&&"criteria"!==this.$route.query.action&&(e=window.location.href);e!==this.$route.fullPath&&this.activeClipboard(e)},fallbackCopyTextToClipboard:function(e){var t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.focus(),t.select();try{document.execCommand("copy")&&this.clipboardMessage(this.$t("notifications.copySuccessful"))}catch(i){this.clipboardMessage(this.$t("notifications.copyUnsuccessful"))}document.body.removeChild(t)},activeClipboard:function(e){var t=this;navigator.clipboard?(navigator.clipboard.writeText(e).then((function(){t.clipboardMessage(t.$t("notifications.copySuccessful"))})).catch((function(){t.clipboardMessage(t.$t("notifications.copyUnsuccessful"))})),navigator.clipboard.writeText(e)):this.fallbackCopyTextToClipboard(e)},clipboardMessage:function(e){this.$message({message:e,type:"success",duration:1500})},redirect:function(){this.$router.push({name:y.PRINT_FORMAT_SETUP_WINDOW.uuid,query:{action:this.getReportDefinition.output.printFormatUuid,tabParent:y.PRINT_FORMAT_SETUP_WINDOW.tabParent}})},validatePrivateAccess:function(e){var t=e.isLocked,i=e.tableName,n=e.recordId;this.isPersonalLock&&(this.actions=t?this.actions.map((function(e){return"unlockRecord"===e.action?Object(r["a"])(Object(r["a"])({},e),{},{hidden:!1,tableName:i,recordId:n}):"lockRecord"===e.action?Object(r["a"])(Object(r["a"])({},e),{},{hidden:!0}):e})):this.actions.map((function(e){return"lockRecord"===e.action?Object(r["a"])(Object(r["a"])({},e),{},{hidden:!1,tableName:i,recordId:n}):"unlockRecord"===e.action?Object(r["a"])(Object(r["a"])({},e),{},{hidden:!0}):e})))}}}}}]);